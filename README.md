# interview_ai_agents

ä¸€ä¸ªåŸºäºAI Agentæ¶æ„çš„Javaåç«¯é¢è¯•çŸ¥è¯†æ™ºèƒ½é—®ç­”ç³»ç»Ÿï¼Œæ”¯æŒè‡ªå®šä¹‰çŸ¥è¯†åº“æ„å»ºã€æ™ºèƒ½æ„å›¾è¯†åˆ«å’Œå¤šè½®å¯¹è¯ã€‚

## ğŸŒŸ é¡¹ç›®ç‰¹è‰²

- **ğŸ§  æ™ºèƒ½æ„å›¾è¯†åˆ«**ï¼šåŸºäºBERTé›¶æ ·æœ¬åˆ†ç±»ï¼ŒåŠ¨æ€è¯†åˆ«ç”¨æˆ·å®é™…åˆ›å»ºçš„çŸ¥è¯†åº“
- **ğŸ“š è‡ªå®šä¹‰çŸ¥è¯†åº“**ï¼šæ”¯æŒä¸Šä¼ PDFæ–‡æ¡£æ„å»ºä¸“å±çŸ¥è¯†åº“ï¼ˆå¦‚è®¡ç®—æœºç½‘ç»œã€Javaé¢è¯•é¢˜ç­‰ï¼‰
- **ğŸ¤– AIé©±åŠ¨å›ç­”**ï¼šé›†æˆé˜¿é‡Œäº‘é€šä¹‰åƒé—®ï¼Œæä¾›ä¸“ä¸šçš„æŠ€æœ¯é¢è¯•å›ç­”
- **ğŸ’¬ å¤šè½®å¯¹è¯**ï¼šæ”¯æŒä¸Šä¸‹æ–‡è®°å¿†çš„è¿ç»­å¯¹è¯ä½“éªŒ
- **ğŸ¨ ç¾è§‚ç•Œé¢**ï¼šç°ä»£åŒ–Webç•Œé¢ï¼Œæ”¯æŒMarkdownæ¸²æŸ“å’Œä»£ç é«˜äº®
- **ğŸ“Š é€æ˜å†³ç­–**ï¼šæ˜¾ç¤ºAIç½®ä¿¡åº¦ã€åŒ¹é…çŸ¥è¯†åº“ç­‰å…ƒæ•°æ®ä¿¡æ¯

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

```
â”œâ”€â”€ app/                    # ä¸»åº”ç”¨æ¨¡å—
â”‚   â”œâ”€â”€ main.py            # FastAPIåº”ç”¨å…¥å£
â”‚   â””â”€â”€ frontend/          # å‰ç«¯æ–‡ä»¶
â”‚       â”œâ”€â”€ templates/     # HTMLæ¨¡æ¿
â”‚       â””â”€â”€ static/        # é™æ€èµ„æºï¼ˆCSS/JSï¼‰
â”œâ”€â”€ knowledge_base/        # çŸ¥è¯†åº“ç®¡ç†
â”‚   â””â”€â”€ knowledge_manager.py
â”œâ”€â”€ intent_recognition/    # æ„å›¾è¯†åˆ«
â”‚   â””â”€â”€ intent_classifier.py
â”œâ”€â”€ answer_generation/     # ç­”æ¡ˆç”Ÿæˆ
â”‚   â””â”€â”€ ali_qianwen.py
â”œâ”€â”€ plugins/              # æ’ä»¶æ‰©å±•
â”‚   â””â”€â”€ google_search.py
â””â”€â”€ utils/               # å·¥å…·å‡½æ•°
    â””â”€â”€ language_support.py
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Python 3.8+
- pip

### å®‰è£…ä¾èµ–

```bash
pip install -r requirements.txt
```

### é…ç½®APIå¯†é’¥

åˆ›å»º `.env` æ–‡ä»¶ï¼š

```bash
DASHSCOPE_API_KEY=your_qianwen_api_key_here
```

### å¯åŠ¨æœåŠ¡

```bash
uvicorn app.main:app --reload --host 0.0.0.0 --port 8081
```

### è®¿é—®ç³»ç»Ÿ

æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼š`http://localhost:8081`

## ğŸ“– ä½¿ç”¨æŒ‡å—

### 1. åˆ›å»ºçŸ¥è¯†åº“

- ç‚¹å‡»å·¦ä¾§è¾¹æ çš„"+"æŒ‰é’®
- è¾“å…¥çŸ¥è¯†åº“åç§°ï¼ˆå¦‚"è®¡ç®—æœºç½‘ç»œ"ã€"Javaé¢è¯•é¢˜"ï¼‰
- ç¡®è®¤åˆ›å»º

### 2. ä¸Šä¼ PDFæ–‡æ¡£

- é€‰æ‹©ç›®æ ‡çŸ¥è¯†åº“
- ç‚¹å‡»"ä¸Šä¼ PDF"æŒ‰é’®
- é€‰æ‹©æœ¬åœ°PDFæ–‡ä»¶æˆ–è¾“å…¥æœåŠ¡å™¨æ–‡ä»¶è·¯å¾„
- ç³»ç»Ÿè‡ªåŠ¨è¿›è¡Œæ–‡æ¡£è§£æå’Œå‘é‡åŒ–å­˜å‚¨

### 3. æ™ºèƒ½é—®ç­”

- åœ¨è¾“å…¥æ¡†ä¸­è¾“å…¥é—®é¢˜
- ç³»ç»Ÿè‡ªåŠ¨è¿›è¡Œæ„å›¾è¯†åˆ«ï¼ŒåŒ¹é…ç›¸å…³çŸ¥è¯†åº“
- AIåŸºäºæ£€ç´¢åˆ°çš„ä¸Šä¸‹æ–‡ç”Ÿæˆä¸“ä¸šå›ç­”
- æ”¯æŒMarkdownæ ¼å¼æ˜¾ç¤ºï¼ŒåŒ…å«ä»£ç é«˜äº®

## ğŸ”§ æ ¸å¿ƒæŠ€æœ¯

- **åç«¯æ¡†æ¶**ï¼šFastAPI
- **AIæ¨¡å‹**ï¼šé˜¿é‡Œäº‘é€šä¹‰åƒé—® (qwen-turbo)
- **æ„å›¾è¯†åˆ«**ï¼šHugging Face BERT (facebook/bart-large-mnli)
- **å‘é‡æ•°æ®åº“**ï¼šFAISS
- **æ–‡æ¡£è§£æ**ï¼šPyPDF2
- **æ–‡æœ¬åˆ†å‰²**ï¼šLangChain RecursiveCharacterTextSplitter
- **å‰ç«¯æŠ€æœ¯**ï¼šHTML5 + Bootstrap 5 + Vanilla JavaScript # ç”±AIç”Ÿæˆ

## ğŸ“… æ›´æ–°æ—¥å¿—

### 2025-08-13 æ›´æ–°

#### ğŸ¯ æ ¸å¿ƒæ”¹è¿›

**1. åŠ¨æ€çŸ¥è¯†åº“è¯†åˆ«**ï¼š
- âŒ åŸæ¥ï¼šç¡¬ç¼–ç çš„çŸ¥è¯†åº“ç±»åˆ«æ˜ å°„
- âœ… ç°åœ¨ï¼šç›´æ¥åŸºäºç”¨æˆ·å®é™…åˆ›å»ºçš„çŸ¥è¯†åº“è¿›è¡Œè¯†åˆ«

**2. ç½®ä¿¡åº¦æ§åˆ¶**ï¼š
- âœ… ç½®ä¿¡åº¦é˜ˆå€¼ï¼š0.5
- âœ… ä½ç½®ä¿¡åº¦æ—¶ä½¿ç”¨ç©ºä¸Šä¸‹æ–‡ï¼ˆé€šç”¨çŸ¥è¯†å›ç­”ï¼‰
- âœ… é«˜ç½®ä¿¡åº¦æ—¶ä»å¯¹åº”çŸ¥è¯†åº“æ£€ç´¢

**3. ç®€æ´çš„é€»è¾‘**ï¼š
- âœ… ç§»é™¤äº†å¤æ‚çš„åˆ«åæ˜ å°„è¡¨
- âœ… ç§»é™¤äº†ç¡¬ç¼–ç çš„è§„åˆ™åŒ¹é…
- âœ… ç›´æ¥ä½¿ç”¨BERTå¯¹å®é™…çŸ¥è¯†åº“è¿›è¡Œåˆ†ç±»

**4. æœ¬åœ°æ–‡ä»¶ä¸Šä¼ **ï¼š
- âœ… æ”¯æŒæµè§ˆå™¨ç›´æ¥é€‰æ‹©æœ¬åœ°PDFæ–‡ä»¶
- âœ… æ–‡ä»¶å¤§å°éªŒè¯ï¼ˆ50MBé™åˆ¶ï¼‰
- âœ… å®æ—¶ä¸Šä¼ è¿›åº¦æ˜¾ç¤º
- âœ… è‡ªåŠ¨ä¸´æ—¶æ–‡ä»¶æ¸…ç†

**5. å›ç­”æ ¼å¼åŒ–ä¼˜åŒ–**ï¼š
- âœ… æ ‡å‡†Markdownæ ¼å¼è¾“å‡º
- âœ… ä»£ç å—è¯­æ³•é«˜äº®
- âœ… ä¸“ä¸šçš„æ ·å¼æ’ç‰ˆ
- âœ… å…ƒæ•°æ®ä¿¡æ¯å±•ç¤ºï¼ˆç½®ä¿¡åº¦ã€çŸ¥è¯†åº“ã€ä¸Šä¸‹æ–‡é•¿åº¦ï¼‰

#### ğŸ”„ å·¥ä½œæµç¨‹ä¼˜åŒ–

```mermaid
graph TD
    A[ç”¨æˆ·æé—®] --> B[è·å–å®é™…å¯ç”¨çŸ¥è¯†åº“]
    B --> C[BERTé›¶æ ·æœ¬åˆ†ç±»]
    C --> D{ç½®ä¿¡åº¦ >= 0.5?}
    D -->|å¦| E[ä½¿ç”¨ç©ºä¸Šä¸‹æ–‡<br/>åŸºäºé€šç”¨çŸ¥è¯†å›ç­”]
    D -->|æ˜¯| F[ä»åŒ¹é…çŸ¥è¯†åº“æ£€ç´¢]
    F --> G[Markdownæ ¼å¼åŒ–å›ç­”]
    E --> G
```

## ğŸ“‹ APIæ–‡æ¡£

### çŸ¥è¯†åº“ç®¡ç†

```bash
# è·å–æ‰€æœ‰çŸ¥è¯†åº“
GET /knowledge_bases

# åˆ›å»ºçŸ¥è¯†åº“
POST /create_kb
Content-Type: application/json
{"name": "çŸ¥è¯†åº“åç§°"}

# åˆ é™¤çŸ¥è¯†åº“
DELETE /delete_kb/{kb_name}

# ä¸Šä¼ PDFæ–‡ä»¶
POST /upload_pdf/
Content-Type: multipart/form-data
file: PDFæ–‡ä»¶
knowledge_base_name: ç›®æ ‡çŸ¥è¯†åº“åç§°
```

### é—®ç­”æ¥å£

```bash
# æ™ºèƒ½é—®ç­”
GET /ask/?question=ä½ çš„é—®é¢˜

# è¿”å›æ ¼å¼
{
    "answer": "AIå›ç­”å†…å®¹",
    "confidence": 0.85,
    "matched_kbs": ["åŒ¹é…çš„çŸ¥è¯†åº“"],
    "context_length": 1024
}
```

## ğŸ¨ ç•Œé¢é¢„è§ˆ

### ä¸»ç•Œé¢
- å·¦ä¾§ï¼šçŸ¥è¯†åº“ç®¡ç†é¢æ¿
- å³ä¾§ï¼šå¯¹è¯äº¤äº’åŒºåŸŸ
- åº•éƒ¨ï¼šé—®é¢˜è¾“å…¥æ¡†

### åŠŸèƒ½ç‰¹è‰²
- ğŸ“± å“åº”å¼è®¾è®¡ï¼Œæ”¯æŒç§»åŠ¨ç«¯
- ğŸ¯ å®æ—¶åŠ è½½çŠ¶æ€æç¤º
- ğŸ“Š AIå†³ç­–è¿‡ç¨‹é€æ˜åŒ–æ˜¾ç¤º
- ğŸ’» ä»£ç å—æ·±è‰²ä¸»é¢˜é«˜äº®

## ğŸ” æŠ€æœ¯ç»†èŠ‚

### æ„å›¾è¯†åˆ«ç®—æ³•

```python
def recognize_intent_with_available_kbs(question: str, available_kbs: list) -> tuple:
    """
    åŸºäºå®é™…å¯ç”¨çŸ¥è¯†åº“è¿›è¡Œæ„å›¾è¯†åˆ«
    è¿”å›ï¼š(åŒ¹é…çš„çŸ¥è¯†åº“åˆ—è¡¨, ç½®ä¿¡åº¦)
    """
    # ä½¿ç”¨BERTè¿›è¡Œé›¶æ ·æœ¬åˆ†ç±»
    result = classifier(
        question,
        candidate_labels=available_kbs,  # å®é™…çŸ¥è¯†åº“ä½œä¸ºå€™é€‰æ ‡ç­¾
        multi_label=True
    )
    
    # è¿‡æ»¤é«˜ç½®ä¿¡åº¦ç»“æœ
    high_confidence_kbs = [
        label for label, score in zip(result['labels'], result['scores'])
        if score >= CONFIDENCE_THRESHOLD
    ]
    
    return high_confidence_kbs, avg_confidence
```

### RAGå®ç°

```python
def search_knowledge_base(query: str, knowledge_base_name: str, top_k: int = 5):
    """ä»æŒ‡å®šçŸ¥è¯†åº“æ£€ç´¢ç›¸å…³æ–‡æ¡£"""
    results = vector_store.similarity_search(
        query, 
        k=top_k,
        filter={"knowledge_base": knowledge_base_name}
    )
    return results
```

## ğŸ› ï¸ å¼€å‘è®¡åˆ’

- [ ] **å¤šè½®å¯¹è¯æ”¯æŒ**ï¼šæ·»åŠ å¯¹è¯å†å²è®°å¿†
- [ ] **çŸ¥è¯†åº“ç»Ÿè®¡**ï¼šæ–‡æ¡£æ•°é‡ã€æ¥æºåˆ†æ
- [ ] **æœç´¢ä¼˜åŒ–**ï¼šæ··åˆæ£€ç´¢ï¼ˆå…³é”®è¯+å‘é‡ï¼‰
- [ ] **ç”¨æˆ·ç®¡ç†**ï¼šå¤šç”¨æˆ·éš”ç¦»
- [ ] **æ’ä»¶ç³»ç»Ÿ**ï¼šGoogleæœç´¢é›†æˆ
- [ ] **æ€§èƒ½ä¼˜åŒ–**ï¼šç¼“å­˜æœºåˆ¶ã€å¼‚æ­¥å¤„ç†

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Forkæœ¬é¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯Pull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…

## ğŸ™ è‡´è°¢

- [é˜¿é‡Œäº‘é€šä¹‰åƒé—®](https://dashscope.aliyun.com/) - AIå›ç­”ç”Ÿæˆ
- [Hugging Face](https://huggingface.co/) - æ„å›¾è¯†åˆ«æ¨¡å‹
- [FAISS](https://faiss.ai/) - å‘é‡ç›¸ä¼¼åº¦æ£€ç´¢
- [FastAPI](https://fastapi.tiangolo.com/) - ç°ä»£Python Webæ¡†æ¶
- [Bootstrap](https://getbootstrap.com/) - å‰ç«¯UIæ¡†æ¶

---

**ğŸ“§ è”ç³»æ–¹å¼**: å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œæ¬¢è¿æIssueæˆ–Pull Request

**ğŸŒŸ å¦‚æœè§‰å¾—é¡¹ç›®æœ‰å¸®åŠ©ï¼Œè¯·ç»™ä¸ªStaræ”¯æŒä¸€ä¸‹ï¼**